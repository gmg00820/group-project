<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${boardType}">게시판</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        a {
            margin: 10px 0;
            display: inline-block;
        }
        .comment-section {
            margin-top: 30px;
        }
        .comment-list {
            list-style: none;
            padding: 0;
        }
        .comment-list li {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<!-- 게시판 제목 -->
<h1 th:text="${boardType}">게시판</h1>

<!-- 새 글 작성 버튼 -->
<a href="/board/add">새 글 작성</a>

<!-- 게시글 목록 -->
<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>제목</th>
        <th>작성자</th>
        <th>작성일</th>
        <th>조회수</th>
    </tr>
    </thead>
    <tbody>
    <!-- 게시글이 없는 경우 -->
    <tr th:if="${posts == null or posts.isEmpty()}">
        <td colspan="5">게시글이 없습니다.</td>
    </tr>
    <!-- 게시글이 있는 경우 -->
    <tr th:each="post : ${posts}">
        <td th:text="${post.pstId}">1</td>
        <td th:text="${post.pstTtl}">게시글 제목</td>
        <td th:text="${post.wrtNm}">작성자</td>
        <td th:text="${post.pstWrtDt}">2024-01-01</td>
        <td th:text="${post.inqCnt != null ? post.inqCnt : 0}">0</td>
    </tr>
    </tbody>
</table>

<!-- 댓글 섹션 -->
<div class="comment-section">
    <h2>댓글</h2>

    <!-- 댓글 목록 -->
    <ul class="comment-list">
        <!-- 댓글이 없는 경우 -->
        <li th:if="${comments == null or comments.isEmpty()}">댓글이 없습니다.</li>

        <!-- 댓글이 있는 경우 -->
        <li th:each="comment : ${comments}">
            <p>
                <strong th:text="${comment.wrtNm}">작성자</strong>:
                <span th:text="${comment.cnmtCn}">댓글 내용</span>
            </p>
            <small th:text="${comment.cnmtWrtDt}">작성일</small>
        </li>
    </ul>

    <!-- 댓글 작성 폼 -->
    <h3>댓글 작성</h3>
    <form action="/api/comments" method="post">
        <input type="hidden" name="pst.pstId" th:value="${posts[0]?.pstId}">
        <div>
            <label for="wrtNm">작성자:</label>
            <input type="text" id="wrtNm" name="wrtNm" placeholder="작성자 이름" required>
        </div>
        <div>
            <label for="cnmtCn">댓글 내용:</label>
            <textarea id="cnmtCn" name="cnmtCn" placeholder="댓글 내용을 입력하세요" required></textarea>
        </div>
        <button type="submit">댓글 작성</button>
    </form>
</div>
</body>
</html>
